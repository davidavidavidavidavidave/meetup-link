<div class="container">
<h1>This is the meetup</h1>
<ul>
  <li>Name: <%= @meetup.name %></li>
  <li>Event Date: <%= @meetup.event_date %></li>
  <li>Purpose: <%= @meetup.purpose %></li>
  <li>Location: <%= @meetup.location %></li>
  <% @meetup.id %><% @meetup.user_id %></li>
</ul>
  <div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>


<h2>Who's going?</h2>
<p>User_meetups</p>
<ul>
  <% @meetup.users.each do |user| %>
  <li>
    <% image_filename = "#{user.username}.png" %>
      <% if File.exist?(Rails.root.join('app', 'assets', 'images', image_filename)) %>
        <%= image_tag image_filename, alt: "Avatar", class: "avatar-large" %>
      <% else %>
        <%= image_tag "MEETUP_8ee3775c-1795-4273-a768-9fb16f09dcac-1.png", alt: "Default Avatar", class: "avatar-large" %>
      <% end %><%= user.username %>
    <br> <!-- Add a line break for spacing -->
</li>
  <% end %>
</ul>
<div>
<% unless current_user_already_joined_meetup? %>
  <%= simple_form_for([@meetup, @user_meetup]) do |f| %>
    <p>Fancy joining this meetup?</p>
    <%= f.input :user_location, label: false, placeholder: 'Please add your location' %>
    <%= f.submit 'Join this Meetup' %>
  <% end %>
<% end %>

<% if current_user_already_joined_meetup? %>
  <% user_meetup = current_user.user_meetups.find_by(meetup: @meetup) %>
  <%= button_to "Leave this Meetup", meetup_user_meetup_path(@meetup, user_meetup), method: :delete, class: "btn btn-danger" %>
<% end %>
</div>
</div>
